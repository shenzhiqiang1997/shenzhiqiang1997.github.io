---
title: 排序算法-希尔排序
date: 2018-09-04 22:30:00
tags: 
    - 算法
    - 排序
categories: 
    - 算法
---
# 希尔排序
## 概述
直接插入排序每轮插入的过程中只能通过一次次进行相邻元素比较才能实现，这使得右侧的元素可能要经过多次比较才能插入到左侧。  
希尔排序则是对直接插入排序做了改进，将数组按照一定步长分为若干组，对每组进行直接插入排序，可以让右侧的元素在较少的操作下就跳跃到左侧来，使得数组整体宏观上大致有序。之后再逐渐缩小步，对每组元素进行直接插入排序，来进行小幅度调整，直到最终步长为1完成排序。
<!-- more -->
## 实现方式
首先将步长设置为数组长度的一半，之后根据步长遍历每组，在每组内部进行直接插入排序。然后将步长减半，重复上述，对每组的元素进行直接插入排序，直到最后一次步长为1完成后数组将有序。
## 实现代码
```java
public class ShellSort {
    public void sort(int[] numbers){
        /* 初始以数组长度/2为步长进行分组 之后不断将步长/2 直到步长为1进行最后一次分组*/
        for (int d = numbers.length/2; d >= 1; d=d/2) {
            /* 每次分组后遍历每组元素 */
            for (int i = 0; i < d; i++) {
                /* 对每组进行插入排序 */
                for (int j = i; j < numbers.length; j=j+d) {
                    for (int k = j; k > 0; k=k-d) {
                        if (numbers[k-1]>numbers[k]){
                            int temp = numbers[k-1];
                            numbers[k-1] = numbers[k];
                            numbers[k] = temp;
                        }
                    }
                }
            }
        }
    }
}
```
## 时间复杂度
希尔排序在一开始步长较大，分组内元素较少，所以排序次数快。在之后的排序过程中由于之前的排序使得数组基本有序，速度也较快。所以希尔排序的时间复杂度优于直接插入排序，平均为O(n^1.3)。
## 稳定性
由于分组内部进行交换，而不是相邻元素进行交换，所以相同元素的相对位置可能发生改变，是不稳定的。