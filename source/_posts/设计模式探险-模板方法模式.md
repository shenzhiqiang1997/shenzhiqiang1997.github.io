---
title: 设计模式探险-模板方法模式
date: 2018-08-28 17:04:00
tags: 
    - 设计模式
    - Java
categories: 
    - 设计模式
---
# 模板方法模式
## 什么是模板方法模式
父类定义算法的框架，其中一些步骤留给子类来实现。
<!-- more -->
## 实现方式
将父类定义为抽象类，将需要子类实现的步骤定义为抽象方法放入算法步骤中，子类继承并实现对应的步骤。
## 实现代码
```java
/*
    这里模拟了洗澡的场景
    洗澡的流程都是第一步打开淋浴
    最后一步关闭淋浴
    但是中间的洗澡流程引人而异
*/
public abstract class ShowerTemplate {
    public void takeAShower(){
        turnOn();
        behavior();
        turnOff();
    }

    protected abstract void behavior();

    void turnOn(){
        System.out.println("turn on the shower");
    }

    void turnOff(){
        System.out.println("turn off the shower");
    }
}

public class ConcreteShower1 extends ShowerTemplate {
    @Override
    protected void behavior() {
        System.out.println("shampoo");
        System.out.println("rub the back");
        System.out.println("clean face");
    }
}

public class ConcreteShower2 extends ShowerTemplate{
    @Override
    protected void behavior() {
        System.out.println("rub the back");
        System.out.println("clean face");
        System.out.println("shampoo");
    }
}

public class TemplateMethodTest {
    public static void main(String[] args) {
        ShowerTemplate concreteShower1 = new ConcreteShower1();
        ShowerTemplate concreteShower2 = new ConcreteShower2();

        concreteShower1.takeAShower();
        System.out.println();
        concreteShower2.takeAShower();
    }
}
```
## 适用场景
当一个流程中只有部分不同，其他部分是重复的，则可以考虑用模板方法，将不同的部分抽象为单独的步骤，交给子类实现，这样就能够复用代码。同步组件中AQS就是用了模板方法这种设计模式来获取和释放资源。
