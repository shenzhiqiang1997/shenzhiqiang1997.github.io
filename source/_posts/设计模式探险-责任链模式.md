---
title: 设计模式探险-责任链模式
date: 2018-08-28 17:04:00
tags: 
    - 设计模式
    - Java
categories: 
    - 设计模式
---
# 责任链模式
## 什么是责任链模式
当有多个处理器对象，它们都有可能处理请求时，将这些对象连接成一条链，将请求交给链首对象后，如果一个对象不能处理这个请求时会传递这个请求给下一个对象处理，直到有一个对象处理了这个请求为止。
<!-- more -->
## 实现方式
在处理器中存放一个后继处理器引用，并暴露处理的请求的接口。一个处理器处理请求时先尝试自己处理，如果自己处理不了则交给后继处理器处理。
## 实现代码
```java
public abstract class Handler {
    protected Handler successor;
    
    public Handler(Handler successor){
        this.successor = successor;
    }

    protected abstract void handleRequest(Request request);
}

public class Request {
    private RequestType requestType;
    private String name;

    public Request(RequestType requestType,String name){
        this.requestType = requestType;
        this.name = name;
    }

    public RequestType getRequestType() {
        return requestType;
    }

    public String getName() {
        return name;
    }
}

public enum RequestType {
    type1,type2;
}

public class ConcreteHandler1 extends Handler {

    public ConcreteHandler1(Handler successor){
        super(successor);
    }

    @Override
    protected void handleRequest(Request request) {
        if (request!=null
                && request.getRequestType() == RequestType.type1){
            System.out.println(request.getName()+" handled by "+getClass().getSimpleName());
            return;
        }

        if (successor != null){
            successor.handleRequest(request);
        }
    }
}

public class ConcreteHandler2 extends Handler {

    public ConcreteHandler2(Handler successor){
        super(successor);
    }

    @Override
    protected void handleRequest(Request request) {
        if (request!=null
                && request.getRequestType() == RequestType.type2){
            System.out.println(request.getName() + " handled by "+getClass().getSimpleName());
            return;
        }

        if (successor!=null){
            successor.handleRequest(request);
        }
    }
}

public class ChainTest {
    public static void main(String[] args) {
        Request request1 = new Request(RequestType.type1,"request1");
        Request request2 = new Request(RequestType.type2,"request2");

        Handler concreteHandler2 = new ConcreteHandler2(null);
        Handler concreteHandler1 = new ConcreteHandler1(concreteHandler2);

        concreteHandler1.handleRequest(request1);
        concreteHandler1.handleRequest(request2);
    }
}
```